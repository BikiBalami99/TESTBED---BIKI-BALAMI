/* macOS Window Styling */

.window {
	position: absolute;
	/* Transparent background to show app content */
	background: transparent;
	-webkit-backdrop-filter: blur(20px) saturate(1.2);
	backdrop-filter: blur(20px) saturate(1.2);
	border-radius: 16px;
	/* Enhanced liquid glass shadows */
	box-shadow:
		/* Main floating shadow */ 0 25px 50px rgba(0, 0, 0, 0.25),
		/* Mid-depth shadow */ 0 12px 25px rgba(0, 0, 0, 0.15),
		/* Close shadow */ 0 4px 12px rgba(0, 0, 0, 0.1),
		/* Subtle border */ 0 0 0 1px rgba(255, 255, 255, 0.2),
		/* Inner highlight */ inset 0 1px 0 rgba(255, 255, 255, 0.3);
	overflow: hidden;
	min-width: 300px;
	min-height: 200px;
	user-select: none;
	/* Smooth transitions for liquid glass effect */
	transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
		background 0.3s cubic-bezier(0.4, 0, 0.2, 1),
		backdrop-filter 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s ease-in-out,
		height 0.3s ease-in-out, border-radius 0.3s ease-in-out;
}

.window.focused {
	/* Enhanced liquid glass when focused */
	background: transparent;
	-webkit-backdrop-filter: blur(25px) saturate(1.4);
	backdrop-filter: blur(25px) saturate(1.4);
	/* Enhanced floating shadows when focused */
	box-shadow:
		/* Main floating shadow */ 0 35px 70px rgba(0, 0, 0, 0.3),
		/* Mid-depth shadow */ 0 18px 35px rgba(0, 0, 0, 0.2),
		/* Close shadow */ 0 6px 15px rgba(0, 0, 0, 0.15),
		/* Enhanced border */ 0 0 0 1px rgba(255, 255, 255, 0.3),
		/* Stronger inner highlight */ inset 0 1px 0 rgba(255, 255, 255, 0.4),
		/* Subtle outer glow */ 0 0 0 1px rgba(255, 255, 255, 0.1);
}

/* Removed .maximized class - now using smooth resize transitions */

.window.noTransition {
	transition: none !important;
}

/* Window Animations */
.window.closing {
	animation: windowClose 0.1s ease-out forwards;
}

.window.opening {
	animation: windowOpen 0.1s ease-out forwards;
}

/* Minimizing and restoring will use dynamic animations */
.window.minimizing {
	pointer-events: none;
	transform-origin: center center;
}

.window.restoreFromMinimize {
	pointer-events: none;
	transform-origin: center center;
}

@keyframes windowClose {
	0% {
		opacity: 1;
		transform: scale(1);
	}
	100% {
		opacity: 0;
		transform: scale(0.95);
	}
}

@keyframes windowOpen {
	0% {
		opacity: 0;
		transform: scale(0.95);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

/* Window Chrome - macOS Title Bar */
.windowChrome {
	/* Liquid glass chrome background */
	background: rgba(255, 255, 255, 0.15);
	-webkit-backdrop-filter: blur(15px) saturate(1.1);
	backdrop-filter: blur(15px) saturate(1.1);
	border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	padding: 0.5rem 0.75rem;
	display: flex;
	align-items: center;
	justify-content: space-between;
	position: relative;
	height: 36px;
	/* Subtle liquid glass highlights */
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.25), inset 0 -1px 0 rgba(0, 0, 0, 0.05),
		0 1px 0 rgba(255, 255, 255, 0.1);
	cursor: default; /* Normal cursor on hover */
}

.windowChrome:active {
	cursor: grabbing; /* Change cursor when actively dragging */
}

.windowChrome::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: linear-gradient(
		90deg,
		transparent 0%,
		rgba(255, 255, 255, 0.02) 20%,
		transparent 80%
	);
	pointer-events: none;
}

/* Traffic Light Buttons - macOS Window Controls */
.trafficLights {
	display: flex;
	gap: 0.5rem;
	align-items: center;
}

.trafficLight {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: none;
	cursor: default;
	position: relative;
	/* 2D minimal style - no 3D effects */
	box-shadow: none;
	transition: box-shadow 0.3s ease;
}

/* Traffic Light Icons */
.trafficLightIcon {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	opacity: 0;
	transition: opacity 0.2s ease;
	pointer-events: none;
}

.trafficLight:hover .trafficLightIcon {
	opacity: 1;
}

.expandIcon {
	transform: translate(-50%, -50%) rotate(90deg);
}

/* Individual hover animations are defined per button below */

.trafficLight:active {
	/* Slight press effect */
	transform: scale(0.95);
	transition: transform 0.1s ease;
}

/* Remove the white glow pseudo-element */
.trafficLight::before {
	display: none;
}

.trafficLight.close {
	background: radial-gradient(circle at 35% 35%, #ff7a70 0%, #ff5f57 50%, #d44c47 100%);
	border: 1px solid #b83d3a;
}

.trafficLight.close:hover {
	animation: pulseGlowRed 0.8s ease-in-out infinite;
}

.trafficLight.minimize {
	background: radial-gradient(circle at 35% 35%, #ffdb47 0%, #ffbd2e 50%, #e6a72a 100%);
	border: 1px solid #cc8f1f;
}

.trafficLight.minimize:hover {
	animation: pulseGlowYellow 0.8s ease-in-out infinite;
}

.trafficLight.maximize {
	background: radial-gradient(circle at 35% 35%, #4ade5c 0%, #28ca42 50%, #22b73d 100%);
	border: 1px solid #1a8b2a;
}

.trafficLight.maximize:hover {
	animation: pulseGlowGreen 0.8s ease-in-out infinite;
}

/* Window Title - Liquid Glass Style */
.windowTitle {
	color: rgba(255, 255, 255, 0.9);
	font-size: 0.875rem;
	font-weight: 600;
	font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
	letter-spacing: -0.01em;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3), 0 0 8px rgba(255, 255, 255, 0.1);
	flex: 1;
	text-align: center;
	margin: 0 1rem;
	cursor: default;
}

/* Content Area */
.contentArea {
	/* Window chrome is 36px */
	height: calc(100% - 36px);
	overflow: auto;
	background: transparent;
}

/* Resize Handles */
.resizeHandle {
	position: absolute;
	background: transparent;
	z-index: 10;
}

.resizeHandle.nw {
	top: -3px;
	left: -3px;
	width: 12px;
	height: 12px;
	cursor: nw-resize;
}

.resizeHandle.ne {
	top: -3px;
	right: -3px;
	width: 12px;
	height: 12px;
	cursor: ne-resize;
}

.resizeHandle.sw {
	bottom: -3px;
	left: -3px;
	width: 12px;
	height: 12px;
	cursor: sw-resize;
}

.resizeHandle.se {
	bottom: -3px;
	right: -3px;
	width: 12px;
	height: 12px;
	cursor: se-resize;
}

.resizeHandle.n {
	top: -3px;
	left: 12px;
	right: 12px;
	height: 6px;
	cursor: n-resize;
}

.resizeHandle.s {
	bottom: -3px;
	left: 12px;
	right: 12px;
	height: 6px;
	cursor: s-resize;
}

.resizeHandle.w {
	top: 12px;
	left: -3px;
	bottom: 12px;
	width: 6px;
	cursor: w-resize;
}

.resizeHandle.e {
	top: 12px;
	right: -3px;
	bottom: 12px;
	width: 6px;
	cursor: e-resize;
}

/* Hover effects for resize handles */
.resizeHandle:hover {
	background: rgba(0, 122, 255, 0.1);
	border-radius: 2px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
	.window {
		min-width: 250px;
		min-height: 150px;
	}

	.windowChrome {
		padding: 0.5rem 0.75rem;
		height: 44px;
	}

	.contentArea {
		height: calc(100% - 44px);
		padding: 1rem;
	}

	.windowTitle {
		font-size: 0.8rem;
		margin: 0 0.5rem;
	}

	.trafficLight {
		width: 10px;
		height: 10px;
	}
}

/* Pulsing glow animations for traffic lights */
@keyframes pulseGlowRed {
	0%,
	100% {
		box-shadow: 0 0 0 0 rgba(255, 122, 112, 0.4);
	}
	50% {
		box-shadow: 0 0 0 4px rgba(255, 122, 112, 0.15);
	}
}

@keyframes pulseGlowYellow {
	0%,
	100% {
		box-shadow: 0 0 0 0 rgba(255, 219, 71, 0.4);
	}
	50% {
		box-shadow: 0 0 0 4px rgba(255, 219, 71, 0.15);
	}
}

@keyframes pulseGlowGreen {
	0%,
	100% {
		box-shadow: 0 0 0 0 rgba(74, 222, 92, 0.4);
	}
	50% {
		box-shadow: 0 0 0 4px rgba(74, 222, 92, 0.15);
	}
}
